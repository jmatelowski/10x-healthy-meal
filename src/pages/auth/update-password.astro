---
import Layout from "@/layouts/Layout.astro";
import UpdatePasswordForm from "@/components/forms/UpdatePasswordForm";

// TODO: Add SSR logic to exchange code for session
// const code = Astro.url.searchParams.get("code");
// if (!code) {
//   return Astro.redirect("/auth/reset-password");
// }

// TODO: Exchange code for session using Supabase
// const supabase = Astro.locals.supabase;
// const { data, error } = await supabase.auth.exchangeCodeForSession(code);
// if (error || !data.session) {
//   return Astro.redirect("/auth/reset-password?error=invalid-code");
// }

const title = "Update Password - HealthyMeal";
---

<Layout title={title}>
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-md mx-auto">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold tracking-tight">Update Password</h1>
        <p class="text-muted-foreground mt-2">Please enter your new password below.</p>
      </div>
      <UpdatePasswordForm client:load />
    </div>
  </main>
</Layout>
